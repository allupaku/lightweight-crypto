
include ../../options.mak

LIBSRC_DIR = ../../src/combined

.PHONY: all clean check

CFLAGS += $(COMMON_CFLAGS) -Wno-unused-parameter -I$(LIBSRC_DIR)
LDFLAGS += $(COMMON_LDFLAGS) -L$(LIBSRC_DIR) -lcryptolw

TARGET1 = kat

OBJS1 = \
    kat.o

DEPS = $(LIBSRC_DIR)/libcryptolw.a

all: $(TARGET1)

$(TARGET1): $(OBJS1) $(DEPS)
	$(CC) -o $(TARGET1) $(OBJS1) $(LDFLAGS)

clean:
	rm -f $(TARGET1) $(TARGET2) $(OBJS1) $(OBJS2)

check: $(TARGET1)
	@./$(TARGET1) ASCON-128 ASCON-128.txt
	@./$(TARGET1) ASCON-128a ASCON-128a.txt
	@./$(TARGET1) ASCON-HASH ASCON-HASH.txt
	@./$(TARGET1) ASCON-XOF ASCON-XOF.txt
	@./$(TARGET1) COMET-128_CHAM-128/128 COMET-128-CHAM.txt
	@./$(TARGET1) COMET-64_CHAM-64/128 COMET-64-CHAM.txt
	@./$(TARGET1) COMET-64_SPECK-64/128 COMET-64-SPECK.txt
	@./$(TARGET1) Esch256 Esch256.txt
	@./$(TARGET1) Esch384 Esch384.txt
	@./$(TARGET1) ESTATE_TweGIFT-128 ESTATE-TWEGIFT-128.txt
	@./$(TARGET1) GIFT-COFB GIFT-COFB.txt
	@./$(TARGET1) GIMLI-24 GIMLI-24-CIPHER.txt
	@./$(TARGET1) GIMLI-24-HASH GIMLI-24-HASH.txt
	@./$(TARGET1) HYENA HYENA.txt
	@./$(TARGET1) ISAP-A-128 ISAP-A-128.txt
	@./$(TARGET1) ISAP-A-128A ISAP-A-128A.txt
	@./$(TARGET1) ISAP-K-128 ISAP-K-128.txt
	@./$(TARGET1) ISAP-K-128A ISAP-K-128A.txt
	@./$(TARGET1) Pyjamask-128-AEAD Pyjamask-128-AEAD.txt
	@./$(TARGET1) Pyjamask-96-AEAD Pyjamask-96-AEAD.txt
	@./$(TARGET1) SATURNIN-CTR-Cascade SATURNIN-CTR-Cascade.txt
	@./$(TARGET1) SATURNIN-Short SATURNIN-Short.txt
	@./$(TARGET1) SATURNIN-Hash SATURNIN-Hash.txt
	@./$(TARGET1) Schwaemm256-128 Schwaemm256-128.txt
	@./$(TARGET1) Schwaemm192-192 Schwaemm192-192.txt
	@./$(TARGET1) Schwaemm128-128 Schwaemm128-128.txt
	@./$(TARGET1) Schwaemm256-256 Schwaemm256-256.txt
	@./$(TARGET1) SKINNY-AEAD-M1 SKINNY-AEAD-M1.txt
	@./$(TARGET1) SKINNY-AEAD-M2 SKINNY-AEAD-M2.txt
	@./$(TARGET1) SKINNY-AEAD-M3 SKINNY-AEAD-M3.txt
	@./$(TARGET1) SKINNY-AEAD-M4 SKINNY-AEAD-M4.txt
	@./$(TARGET1) SKINNY-AEAD-M5 SKINNY-AEAD-M5.txt
	@./$(TARGET1) SKINNY-AEAD-M6 SKINNY-AEAD-M6.txt
	@./$(TARGET1) SUNDAE-GIFT-0 SUNDAE-GIFT-0.txt
	@./$(TARGET1) SUNDAE-GIFT-64 SUNDAE-GIFT-64.txt
	@./$(TARGET1) SUNDAE-GIFT-96 SUNDAE-GIFT-96.txt
	@./$(TARGET1) SUNDAE-GIFT-128 SUNDAE-GIFT-128.txt
	@./$(TARGET1) TinyJAMBU-128 TinyJAMBU-128.txt
	@./$(TARGET1) TinyJAMBU-192 TinyJAMBU-192.txt
	@./$(TARGET1) TinyJAMBU-256 TinyJAMBU-256.txt

kat.o: $(wildcard $(LIBSRC_DIR)/*.h)
